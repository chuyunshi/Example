<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>金额格式化</title>
</head>
<body>

<p class="sp">123456111</p>
<p class="sp">15422.454848</p>
<p class="sp"></p>
<input class="sp" type="text" value="1231232133123"/>
<p class="sp">1256</p>
<p class="sp">798565264</p>

<script type="text/javascript" src="js/zepto.min.1.js"></script>
<script>

    /*函数封装  开始*/
    /*函数封装  开始*/
    function outputmoney(number) {
        if (isNaN(number) || number == "") return "";
        number = Math.round(number * 100) / 100;
        if (number < 0)
            return '-' + outputdollars(Math.floor(Math.abs(number) - 0) + '') + outputcents(Math.abs(number) - 0);
        else
            return outputdollars(Math.floor(number - 0) + '') + outputcents(number - 0);
    }
    //格式化金额
    function outputdollars(number) {
        if (number.length <= 3)
            return (number == '' ? '0' : number);
        else {
            var mod = number.length % 3;
            var output = (mod == 0 ? '' : (number.substring(0, mod)));
            for (i = 0; i < Math.floor(number.length / 3); i++) {
                if ((mod == 0) && (i == 0))
                    output += number.substring(mod + 3 * i, mod + 3 * i + 3);
                else
                    output += ',' + number.substring(mod + 3 * i, mod + 3 * i + 3);
            }
            return (output);
        }
    }

    function outputcents(amount) {
        amount = Math.round(((amount) - Math.floor(amount)) * 100);
        return (amount < 10 ? '.0' + amount : '.' + amount);
    }

    /*函数封装  结束*/

    $(function () {
        var num,text;
        for (var i = 0; i<$(".sp").length; i++) {

            if($(".sp").eq(i).text()==''){
                num = $(".sp").eq(i).val();
                num = (num / 10000).toFixed(2);
                text = outputmoney(num)
                $(".sp").eq(i).val(text);
            }else{
                num = $(".sp").eq(i).text();
                num = (num / 10000).toFixed(2);
                text = outputmoney(num)
                $(".sp").eq(i).text(text);
            }

        }
    })




</script>
</body>
</html>